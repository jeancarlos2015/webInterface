language: java
dist: trusty
sudo: false
jdk:
  - oraclejdk8
before_install:
- chmod +x mvnw
services:
    - postgresql
before_script:
    - psql -c 'CREATE DATABASE bancoSistex;' -U postgres;
    - psql -c "ALTER USER postgres WITH PASSWORD 'ifes'" -d template1;
addons:
  sonarcloud:
    organization: "gerentefornecedor"
    token:
      secure: "$SONAR_KEY_GERENTE"
script:
  - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent package sonar:sonar
deploy:
 provider: heroku
 api-key:
  secure: $HEROKU_SONAR
 app: servicogerentefornecedor
